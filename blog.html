<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - Shreshth's Blog</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000000;
            color: #b3d4ff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 30px 30px;
            min-height: 100vh;
        }

        header {
            margin-bottom: 40px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        header h1 a {
            color: #4a9eff;
            text-decoration: none;
        }

        nav {
            font-size: 1.4em;
            color: #6b8cae;
            margin-bottom: 0;
        }

        nav a {
            color: #5eb3f6;
            text-decoration: none;
            transition: color 0.2s ease;
            margin-right: 20px;
        }

        nav a:hover {
            color: #00d4ff;
        }

        main {
            margin-bottom: 0;
        }

        .blog-entries {
            display: flex;
            flex-direction: column;
            gap: 1.2em;
        }

        .blog-entry {
            display: flex;
            align-items: baseline;
            gap: 2em;
        }

        .blog-date {
            font-size: 1.1em;
            color: #6b8cae;
            font-style: italic;
            white-space: nowrap;
            min-width: 120px;
        }

        .blog-title {
            font-size: 1.2em;
            color: #5eb3f6;
            font-weight: 400;
        }

        .blog-title a {
            color: #5eb3f6;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .blog-title a:hover {
            color: #00d4ff;
        }

        a {
            color: #5eb3f6;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        a:hover {
            color: #00d4ff;
        }

        .loading {
            color: #6b8cae;
            font-style: italic;
        }
    </style>
</head>
<body>

    <header>
        <h1><a href="index.html">Shreshth Saride</a></h1>
        <nav>
            <a href="index.html">home</a>
            <a href="blog.html">blog</a>
            <a href="timeline.html">timeline</a>
        </nav>
    </header>

    <main>
        <div class="blog-entries" id="blog-entries">
            <div class="blog-entry loading">
                <span class="blog-date">loading...</span>
                <span class="blog-title">fetching posts</span>
            </div>
        </div>
    </main>

    <script>
        // Function to fetch and display blog posts
        async function loadBlogPosts() {
            const blogContainer = document.getElementById('blog-entries');
            
            try {
                // Fetch the posts directory listing from GitHub API
                const response = await fetch('https://api.github.com/repos/Shreshth1x/shreshthsaride-website/contents/posts');
                const files = await response.json();
                
                // Filter for markdown files
                const posts = files.filter(file => file.name.endsWith('.md'));
                
                if (posts.length === 0) {
                    blogContainer.innerHTML = `
                        <div class="blog-entry">
                            <span class="blog-date">24 Dec, 2025</span>
                            <span class="blog-title">coming soon</span>
                        </div>
                    `;
                    return;
                }
                
                // Fetch content of each post
                const postPromises = posts.map(async (post) => {
                    const contentResponse = await fetch(post.download_url);
                    const content = await contentResponse.text();
                    
                    // Parse frontmatter
                    const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
                    if (frontmatterMatch) {
                        const frontmatter = frontmatterMatch[1];
                        const titleMatch = frontmatter.match(/title:\s*["']?(.+?)["']?\n/);
                        const dateMatch = frontmatter.match(/date:\s*(.+)/);
                        
                        const title = titleMatch ? titleMatch[1] : 'Untitled';
                        const date = dateMatch ? new Date(dateMatch[1]) : new Date();
                        
                        // Create slug from filename
                        const slug = post.name.replace('.md', '');
                        
                        return {
                            title,
                            date,
                            slug,
                            filename: post.name
                        };
                    }
                    return null;
                });
                
                const postsData = (await Promise.all(postPromises)).filter(p => p !== null);
                
                // Sort by date (newest first)
                postsData.sort((a, b) => b.date - a.date);
                
                // Display posts
                blogContainer.innerHTML = postsData.map(post => {
                    const formattedDate = post.date.toLocaleDateString('en-US', {
                        day: 'numeric',
                        month: 'short',
                        year: 'numeric'
                    });
                    
                    return `
                        <div class="blog-entry">
                            <span class="blog-date">${formattedDate}</span>
                            <span class="blog-title"><a href="post.html?slug=${post.slug}">${post.title}</a></span>
                        </div>
                    `;
                }).join('');
                
            } catch (error) {
                console.error('Error loading posts:', error);
                blogContainer.innerHTML = `
                    <div class="blog-entry">
                        <span class="blog-date">24 Dec, 2025</span>
                        <span class="blog-title">coming soon</span>
                    </div>
                `;
            }
        }
        
        // Load posts when page loads
        loadBlogPosts();
    </script>

</body>
</html>
